# メールテンプレート設定ガイド

**作成日**: 2025年11月9日
**対象**: Supabase認証メールのカスタマイズ

---

## 📧 作成したテンプレート

このディレクトリには、以下のメールテンプレートが含まれています：

### 1. `confirm_signup.html` - HTML版
- 視覚的に魅力的なデザイン
- グラデーションヘッダー
- 目立つCTAボタン
- ウェルカムボーナス情報
- セキュリティ情報
- モバイルフレンドリー

### 2. `confirm_signup_plain.txt` - プレーンテキスト版
- HTMLメールをサポートしていないクライアント用
- シンプルで読みやすい
- 絵文字でアクセント

---

## 🚀 Supabaseでの設定方法

### ステップ1: Supabaseダッシュボードにアクセス

1. [Supabase Dashboard](https://supabase.com/dashboard) を開く
2. プロジェクト **smmkxxavexumewbfaqpy** を選択
3. 左サイドバーから **Authentication** → **Email Templates** をクリック

### ステップ2: HTML版の設定

1. **Confirm signup** テンプレートを選択
2. `confirm_signup.html` の内容をコピー
3. **Message (HTML)** タブに貼り付け
4. **Save** をクリック

### ステップ3: プレーンテキスト版の設定

1. 同じく **Confirm signup** テンプレートで
2. **Message (Plain text)** タブを選択
3. `confirm_signup_plain.txt` の内容をコピー
4. 貼り付けて **Save**

### ステップ4: テスト

1. 新しいメールアドレスでサインアップ
2. 受信したメールのデザインを確認
3. リンクが正しく動作するか確認

---

## 🎨 デザインの特徴

### HTML版

#### カラースキーム
- **プライマリ**: `#667eea` - `#764ba2` (グラデーション)
- **背景**: `#f5f5f5` (ライトグレー)
- **カード**: `#ffffff` (ホワイト)
- **テキスト**: `#333333` / `#666666`

#### レイアウト
- **幅**: 最大600px（モバイルフレンドリー）
- **角丸**: 12px（モダンな印象）
- **影**: 0 4px 6px rgba(0, 0, 0, 0.1)（立体感）

#### 主要要素
1. **グラデーションヘッダー** - 目を引くビジュアル
2. **アイコン** - ✉️ 絵文字で親しみやすさ
3. **CTAボタン** - 大きく目立つアクションボタン
4. **ウェルカムボーナス** - 500ポイント獲得の案内
5. **セキュリティ情報** - 24時間有効、安心感
6. **フッター** - ブランド情報とリンク

---

## 🔧 カスタマイズ方法

### カラーの変更

グラデーションの色を変更したい場合：

```html
<!-- 現在 -->
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

<!-- 別の例 -->
background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); /* 緑系 */
background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); /* ピンク系 */
background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); /* 青系 */
```

### アイコンの変更

絵文字を変更したい場合：

```html
<!-- 現在 -->
<span style="font-size: 40px;">✉️</span>

<!-- 別の例 -->
<span style="font-size: 40px;">📝</span> <!-- メモ -->
<span style="font-size: 40px;">🎯</span> <!-- ターゲット -->
<span style="font-size: 40px;">🚀</span> <!-- ロケット -->
```

### ボーナスポイントの変更

500ポイント以外にする場合：

```html
<!-- 現在 -->
<strong style="color: #667eea;">500ポイント</strong>

<!-- 変更例 -->
<strong style="color: #667eea;">1000ポイント</strong>
```

---

## 📱 モバイル対応

このテンプレートは**レスポンシブデザイン**で、以下のデバイスで適切に表示されます：

- ✅ iPhone / Android
- ✅ iPad / タブレット
- ✅ デスクトップ
- ✅ Gmail アプリ
- ✅ Apple Mail
- ✅ Outlook（モダン版）

---

## 🧪 テスト方法

### 1. 実際のメールアドレスでテスト

```bash
# 新規サインアップ
# → メールを確認
# → デザインをチェック
```

### 2. 複数のメールクライアントで確認

- Gmail（Web）
- Gmail（モバイルアプリ）
- Outlook（Web）
- Apple Mail
- Yahoo! Mail

### 3. HTMLとプレーンテキストの切り替え

一部のメールクライアントでは、ユーザーが「HTMLを表示」「テキストのみ表示」を切り替えられます。両方のバージョンが適切に表示されることを確認してください。

---

## 🎯 他のメールテンプレート

同様の手法で、以下のメールテンプレートもカスタマイズできます：

### パスワードリセット
- `Reset password` テンプレート
- 同じデザインで統一感を持たせる
- 緊急性を示すため、赤系の色を使うのも良い

### マジックリンク
- `Magic Link` テンプレート
- パスワード不要のログイン用

### メールアドレス変更
- `Change Email Address` テンプレート
- セキュリティを強調

---

## 💡 ベストプラクティス

### 1. シンプルを保つ
- メインアクションは1つだけ
- 余白を十分に取る
- フォントサイズは読みやすく（最小13px）

### 2. ブランド一貫性
- サイトと同じカラースキームを使用
- ロゴを入れる（将来的に）
- トーン＆マナーを統一

### 3. セキュリティ情報
- リンクの有効期限を明記
- 心当たりがない場合の対処法を記載
- フィッシング対策の注意喚起

### 4. モバイルファースト
- ボタンは指で押しやすいサイズ（最小44x44px）
- フォントは読みやすく（本文15px以上）
- 画像は軽量化

### 5. A/Bテスト
- 開封率を測定
- クリック率を測定
- 異なるデザインを試す

---

## 🔗 関連ドキュメント

- [Supabase Email Templates ドキュメント](https://supabase.com/docs/guides/auth/auth-email-templates)
- [HTMLメールのベストプラクティス](https://www.campaignmonitor.com/dev-resources/guides/coding/)

---

## 📊 利用可能な変数

Supabaseメールテンプレートで使用できる変数：

| 変数 | 説明 | 例 |
|:-----|:-----|:---|
| `{{ .ConfirmationURL }}` | 確認リンク | `https://example.com/...` |
| `{{ .Token }}` | トークン | `abc123...` |
| `{{ .TokenHash }}` | トークンハッシュ | `xyz789...` |
| `{{ .SiteURL }}` | サイトURL | `https://my-web-app-b67f4.web.app` |
| `{{ .RedirectTo }}` | リダイレクト先 | オプション |

---

**最終更新**: 2025年11月9日
**作成者**: Claude Code
